import{a5 as s,O as i,N as a,a7 as e}from"./chunks/framework.DgU4mJzO.js";const F=JSON.parse('{"title":"å®‰è£…-ç”Ÿäº§ç¯å¢ƒ-dockeræ–¹å¼","description":"","frontmatter":{},"headers":[],"relativePath":"ERPNextå…¥å‘ç¬”è®°/02.å®‰è£…/2.å¼€å‘ç¯å¢ƒ-dockeræ–¹å¼.md","filePath":"ERPNextå…¥å‘ç¬”è®°/02.å®‰è£…/2.å¼€å‘ç¯å¢ƒ-dockeræ–¹å¼.md","lastUpdated":1747659832000}'),t={name:"ERPNextå…¥å‘ç¬”è®°/02.å®‰è£…/2.å¼€å‘ç¯å¢ƒ-dockeræ–¹å¼.md"},l=e(`<h1 id="å®‰è£…-ç”Ÿäº§ç¯å¢ƒ-dockeræ–¹å¼" tabindex="-1">å®‰è£…-ç”Ÿäº§ç¯å¢ƒ-dockeræ–¹å¼ <a class="header-anchor" href="#å®‰è£…-ç”Ÿäº§ç¯å¢ƒ-dockeræ–¹å¼" aria-label="Permalink to &quot;å®‰è£…-ç”Ÿäº§ç¯å¢ƒ-dockeræ–¹å¼&quot;">â€‹</a></h1><p>å®˜ç½‘åŸæ–‡ <a href="https://github.com/frappe/frappe_docker" target="_blank" rel="noreferrer">https://github.com/frappe/frappe_docker</a> å¦‚æœæ˜¯<code>linux</code>ç³»ç»Ÿï¼Œè¯·æŒ‰ç…§å®˜æ–¹æ–‡æ¡£æ“ä½œå°±å¥½ğŸ‘†</p><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯<code>Windows</code>ç³»ç»Ÿï¼Œåœ¨å®˜æ–¹çš„åŸºç¡€ä¸Šï¼Œåšäº†ä¸€äº›å°æ”¹åŠ¨</p><blockquote><p>åœ°å€: <a href="https://gitee.com/yiguxianyun/frappe_docker20250516" target="_blank" rel="noreferrer">https://gitee.com/yiguxianyun/frappe_docker20250516</a> å®Œæ•´è¯´æ˜æ–‡æ¡£è§æºç æ–‡ä»¶ä¸­çš„<code>docs\\development.md</code></p></blockquote><h2 id="å…‹éš†å¹¶ç”¨vscodeæ‰“å¼€frappe-docker20250516" tabindex="-1">å…‹éš†å¹¶ç”¨vscodeæ‰“å¼€frappe_docker20250516ï¼š <a class="header-anchor" href="#å…‹éš†å¹¶ç”¨vscodeæ‰“å¼€frappe-docker20250516" aria-label="Permalink to &quot;å…‹éš†å¹¶ç”¨vscodeæ‰“å¼€frappe_docker20250516ï¼š&quot;">â€‹</a></h2><p>å°†ç¤ºä¾‹å¼€å‘å®¹å™¨é…ç½®ä»<code>devcontainer-example</code>å¤åˆ¶åˆ°<code>.devcontainer</code>ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> devcontainer-example</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .devcontainer</span></span></code></pre></div><p>å°†å¼€å‘ç”¨VSCodeé…ç½®ä»<code>development/vscode-example</code>å¤åˆ¶åˆ°<code>development/.vscode</code>ï¼Œè¿™å°†è®¾ç½®åŸºæœ¬çš„è°ƒè¯•é…ç½®ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> development/vscode-example</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> development/.vscode</span></span></code></pre></div><h2 id="ä½¿ç”¨vscodeè¿œç¨‹å®¹å™¨æ‰©å±•" tabindex="-1">ä½¿ç”¨VSCodeè¿œç¨‹å®¹å™¨æ‰©å±• <a class="header-anchor" href="#ä½¿ç”¨vscodeè¿œç¨‹å®¹å™¨æ‰©å±•" aria-label="Permalink to &quot;ä½¿ç”¨VSCodeè¿œç¨‹å®¹å™¨æ‰©å±•&quot;">â€‹</a></h2><p>å¯¹äºå¤§å¤šæ•°å¼€å§‹Frappeå¼€å‘çš„ç”¨æˆ·ï¼Œæœ€ä½³æ–¹æ¡ˆæ˜¯ä½¿ç”¨<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers" target="_blank" rel="noreferrer">VSCode Dev Containersæ‰©å±•</a>ã€‚</p><p>åœ¨å®¹å™¨ä¸­æ‰“å¼€æ–‡ä»¶å¤¹ä¹‹å‰ï¼Œå…ˆç¡®å®šè¦ä½¿ç”¨çš„æ•°æ®åº“ï¼ˆé»˜è®¤ä¸ºMariaDBï¼‰ã€‚å¦‚æœéœ€è¦ä½¿ç”¨PostgreSQLï¼Œè¯·ç¼–è¾‘<code>.devcontainer/docker-compose.yml</code>ï¼Œå–æ¶ˆæ³¨é‡Š<code>postgresql</code>æœåŠ¡éƒ¨åˆ†ï¼Œå¹¶æ³¨é‡Šæ‰<code>mariadb</code>æœåŠ¡ã€‚</p><p>VSCodeä¼šè‡ªåŠ¨æç¤ºå®‰è£…æ‰€éœ€æ‰©å±•ï¼Œä¹Ÿå¯æ‰‹åŠ¨å®‰è£…ï¼š</p><ul><li>é€šè¿‡å‘½ä»¤è¡Œå®‰è£…ï¼š<code>code --install-extension ms-vscode-remote.remote-containers</code></li><li>åœ¨VSCodeå¸‚åœºç‚¹å‡»å®‰è£…ï¼š<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers" target="_blank" rel="noreferrer">Dev Containers</a></li><li>é€šè¿‡VSCodeæ‰©å±•è§†å›¾ï¼ˆWindows: Ctrl+Shift+Xï¼›macOS: Cmd+Shift+Xï¼‰æœç´¢æ‰©å±•<code>ms-vscode-remote.remote-containers</code></li></ul><p>å®‰è£…å®Œæˆåï¼š</p><ul><li>åœ¨VSCodeä¸­æ‰“å¼€frappe_dockeræ–‡ä»¶å¤¹ï¼š<code>code .</code></li><li>ä»å‘½ä»¤é¢æ¿ï¼ˆCtrl+Shift+Pï¼‰æ‰§è¡Œ<code>Dev Containers: Reopen in Container</code>ï¼Œä¹Ÿå¯ç‚¹å‡»å·¦ä¸‹è§’è®¿é—®è¿œç¨‹å®¹å™¨èœå•ã€‚</li></ul><p><strong>æ³¨æ„</strong>ï¼š</p><ul><li><code>development</code>ç›®å½•è¢«gitå¿½ç•¥ï¼Œå®ƒä¼šè¢«æŒ‚è½½åˆ°å®¹å™¨å†…ã€‚è¯·åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºæ‰€æœ‰benchï¼ˆç®¡ç†Frappeçš„å·¥å…·ï¼‰ã€‚</li></ul><p>ä»¥ä¸‹éƒ½æ˜¯åœ¨å¼€å‘å®¹å™¨ä¸­çš„æ“ä½œğŸ‘‡</p><h2 id="åˆ‡æ¢å›½å†…é•œåƒæº" tabindex="-1">åˆ‡æ¢å›½å†…é•œåƒæº <a class="header-anchor" href="#åˆ‡æ¢å›½å†…é•œåƒæº" aria-label="Permalink to &quot;åˆ‡æ¢å›½å†…é•œåƒæº&quot;">â€‹</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">amtf/yuan.sh</span></span></code></pre></div><h2 id="ä½¿ç”¨è„šæœ¬åˆå§‹åŒ–bench-æ–°ç«™ç‚¹" tabindex="-1">ä½¿ç”¨è„šæœ¬åˆå§‹åŒ–bench/æ–°ç«™ç‚¹ <a class="header-anchor" href="#ä½¿ç”¨è„šæœ¬åˆå§‹åŒ–bench-æ–°ç«™ç‚¹" aria-label="Permalink to &quot;ä½¿ç”¨è„šæœ¬åˆå§‹åŒ–bench/æ–°ç«™ç‚¹&quot;">â€‹</a></h2><h3 id="ä¿®æ”¹installer-pyæŒ‡å®šfrappeä¸ºå›½å†…åœ°å€" tabindex="-1">ä¿®æ”¹installer.pyæŒ‡å®šfrappeä¸ºå›½å†…åœ°å€ <a class="header-anchor" href="#ä¿®æ”¹installer-pyæŒ‡å®šfrappeä¸ºå›½å†…åœ°å€" aria-label="Permalink to &quot;ä¿®æ”¹installer.pyæŒ‡å®šfrappeä¸ºå›½å†…åœ°å€&quot;">â€‹</a></h3><p>frappeå›½å†…ç‰ˆæœ¬ä¸­ï¼Œä¿®æ”¹package.jsonä¸­çš„ä¾èµ–æ—¶è¦æ³¨æ„ï¼š è®¾ç½®æˆè¿™æ ·ï¼Œä¼šæŠ¥é”™ air-datepicker æ‰¾ä¸åˆ°å¯¹åº”ç‰ˆæœ¬ğŸ‘‡</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> &quot;dependencies&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    â€¦â€¦</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    &quot;air-datepicker&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;gitee:yiguxianyun/amtf-air-datepicker&quot;,</span></span></code></pre></div><p>æ”¹æˆè¿™æ ·å°±æ²¡æŠ¥é”™äº†ğŸ‘‡</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> &quot;dependencies&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    â€¦â€¦</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    &quot;air-datepicker&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;git+https://gitee.com/yiguxianyun/air-datepicker&quot;,</span></span></code></pre></div><p>å¤§å¤šæ•°å¼€å‘è€…éœ€è¦å¤„ç†å¤šä¸ªå®¢æˆ·å’Œç‰ˆæœ¬ï¼Œä¸”å›¢é˜Ÿæˆå‘˜å¯èƒ½éœ€è¦å®‰è£…ç›¸åŒåº”ç”¨ã€‚ä»¥ä¸‹è„šæœ¬å¯è‡ªåŠ¨åŒ–åˆ›å»ºbench/ç«™ç‚¹å¹¶å®‰è£…åº”ç”¨ï¼ˆé»˜è®¤ç®¡ç†å‘˜å¯†ç ä¸º<code>admin</code>ï¼‰ã€‚</p><p>é»˜è®¤ä½¿ç”¨ç¤ºä¾‹<code>apps-example.json</code>æŒ‡å®šå…¶ä»–appçš„å®‰è£…</p><blockquote><p>ç§æœ‰ä»“åº“åº”ç”¨å¯èƒ½éœ€è¦SSHè®¿é—®ï¼ŒLinuxç”¨æˆ·å¯åœ¨<code>docker-compose.yml</code>ä¸­é…ç½®å®¿ä¸»ç›®å½•çš„SSHå¯†é’¥ã€‚</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> installer.py</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å¦‚éœ€ä½¿ç”¨PostgreSQLï¼Œæ·»åŠ --db-type postgres</span></span></code></pre></div><h4 id="æ–°å»ºå…¶ä»–" tabindex="-1">æ–°å»ºå…¶ä»– <a class="header-anchor" href="#æ–°å»ºå…¶ä»–" aria-label="Permalink to &quot;æ–°å»ºå…¶ä»–&quot;">â€‹</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> installer.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frappe-bench-cs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> development-cs.localhost</span></span></code></pre></div><p><strong>é»˜è®¤é…ç½®</strong>ï¼š</p><ul><li>MariaDB rootå¯†ç ï¼š<code>123</code></li><li>ç®¡ç†å‘˜å¯†ç ï¼š<code>admin</code></li></ul><h3 id="åœ¨æ–°ç«™ç‚¹å¯ç”¨å¼€å‘è€…æ¨¡å¼" tabindex="-1">åœ¨æ–°ç«™ç‚¹å¯ç”¨å¼€å‘è€…æ¨¡å¼ <a class="header-anchor" href="#åœ¨æ–°ç«™ç‚¹å¯ç”¨å¼€å‘è€…æ¨¡å¼" aria-label="Permalink to &quot;åœ¨æ–°ç«™ç‚¹å¯ç”¨å¼€å‘è€…æ¨¡å¼&quot;">â€‹</a></h3><p>å¼€å‘æ–°åº”ç”¨çš„æœ€åä¸€æ­¥æ˜¯å°†ç«™ç‚¹è®¾ç½®ä¸ºå¼€å‘è€…æ¨¡å¼ï¼Œæ–‡æ¡£è§<a href="https://frappe.io/docs/user/en/guides/app-development/how-enable-developer-mode-in-frappe" target="_blank" rel="noreferrer">æ­¤é“¾æ¥</a>ã€‚</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bench</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --site</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> development.localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> developer_mode</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bench</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --site</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> development.localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clear-cache</span></span></code></pre></div><p><strong>æ³¨æ„</strong>ï¼šfrappeå’Œerpnextå¿…é¡»ä½¿ç”¨åŒååˆ†æ”¯ï¼ˆå¦‚å‡ä¸ºversion-14ï¼‰ï¼Œè‹¥ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯¹é½ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bench</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> switch-to-branch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version-xx</span></span></code></pre></div><h3 id="ä¸è°ƒè¯•å¯åŠ¨frappe" tabindex="-1">ä¸è°ƒè¯•å¯åŠ¨Frappe <a class="header-anchor" href="#ä¸è°ƒè¯•å¯åŠ¨frappe" aria-label="Permalink to &quot;ä¸è°ƒè¯•å¯åŠ¨Frappe&quot;">â€‹</a></h3><p>åœ¨<code>frappe-bench</code>ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bench</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div><p>æ­¤æ—¶å¯ä½¿ç”¨åˆ›å»ºç«™ç‚¹æ—¶è®¾ç½®çš„ç”¨æˆ·åï¼ˆå¦‚<code>Administrator</code>ï¼‰å’Œå¯†ç ç™»å½•ï¼Œç½‘ç«™åœ°å€ä¸º<a href="http://development.localhost:8000" target="_blank" rel="noreferrer">development.localhost:8000</a>ã€‚<br><strong>æ³¨</strong>ï¼šå¦‚éœ€è°ƒè¯•å¯åŠ¨ï¼Œè§è°ƒè¯•éƒ¨åˆ†ã€‚</p><h3 id="ä½¿ç”¨vscode-pythonè°ƒè¯•å¯åŠ¨frappe" tabindex="-1">ä½¿ç”¨VSCode Pythonè°ƒè¯•å¯åŠ¨Frappe <a class="header-anchor" href="#ä½¿ç”¨vscode-pythonè°ƒè¯•å¯åŠ¨frappe" aria-label="Permalink to &quot;ä½¿ç”¨VSCode Pythonè°ƒè¯•å¯åŠ¨Frappe&quot;">â€‹</a></h3><p>è‹¥è¦åœ¨VSCodeä¸­å¯ç”¨Pythonè°ƒè¯•ï¼Œéœ€å…ˆåœ¨å®¹å™¨å†…å®‰è£…<code>ms-python.python</code>æ‰©å±•ï¼ˆé€šå¸¸ä¼šè‡ªåŠ¨å®‰è£…ï¼Œå¦‚éœ€æ‰‹åŠ¨å®‰è£…ï¼‰ï¼š</p><ul><li>ç‚¹å‡»VSCodeæ‰©å±•å›¾æ ‡</li><li>æœç´¢<code>ms-python.python</code></li><li>ç‚¹å‡»<code>Install on Dev Container: Frappe Bench</code></li><li>ç‚¹å‡»â€œé‡æ–°åŠ è½½â€</li></ul><p>éœ€é€šè¿‡VSCodeè°ƒè¯•å™¨å•ç‹¬å¯åŠ¨benchã€‚åœ¨<code>frappe-bench</code>ç›®å½•ä¸­ï¼Œ<strong>ä¸è¦</strong>è¿è¡Œ<code>bench start</code>ï¼Œè€Œæ˜¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">honcho</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    socketio</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    watch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    schedule</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    worker_short</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    worker_long</span></span></code></pre></div><p>ä¹Ÿå¯ä½¿ç”¨VSCodeå¯åŠ¨é…ç½®â€œHoncho SocketIO Watch Schedule Workerâ€æ‰§è¡Œç›¸åŒå‘½ä»¤ã€‚</p><p>æ­¤å‘½ä»¤ä¼šå¯åŠ¨é™¤Redisï¼ˆå·²åœ¨ç‹¬ç«‹å®¹å™¨ä¸­è¿è¡Œï¼‰å’Œ<code>web</code>è¿›ç¨‹å¤–çš„æ‰€æœ‰æœåŠ¡ã€‚<code>web</code>è¿›ç¨‹å¯åœ¨VSCodeè°ƒè¯•æ ‡ç­¾é¡µä¸­ç‚¹å‡»â€œè¿è¡Œâ€æŒ‰é’®å¯åŠ¨ã€‚</p><p>æŒ‰æœ¬æŒ‡å—æ— äººå€¼å®ˆå®‰è£…æ—¶ï¼Œç®¡ç†å‘˜å¯†ç ä¸º<code>admin</code>ï¼Œå¯é€šè¿‡è¯¥å¯†ç ç™»å½•ã€‚<br> å¦‚éœ€è°ƒè¯•workerï¼Œå¯è·³è¿‡honchoå¯åŠ¨workerï¼Œç›´æ¥é€šè¿‡VSCodeè°ƒè¯•å™¨å¯åŠ¨ã€‚<br> å¦‚éœ€é«˜çº§é…ç½®ï¼Œå¯ä¿®æ”¹<code>development/.vscode</code>ä¸­çš„é…ç½®æ–‡ä»¶ã€‚</p><h2 id="ä½¿ç”¨äº¤äº’å¼æ§åˆ¶å°å¼€å‘" tabindex="-1">ä½¿ç”¨äº¤äº’å¼æ§åˆ¶å°å¼€å‘ <a class="header-anchor" href="#ä½¿ç”¨äº¤äº’å¼æ§åˆ¶å°å¼€å‘" aria-label="Permalink to &quot;ä½¿ç”¨äº¤äº’å¼æ§åˆ¶å°å¼€å‘&quot;">â€‹</a></h2><p>å¯åœ¨ç»ˆç«¯å¯åŠ¨ç®€å•çš„äº¤äº’å¼Shellæ§åˆ¶å°ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bench</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --site</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> development.localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span></span></code></pre></div><p>æ›´æ¨èä½¿ç”¨åŸºäºJupyterå†…æ ¸çš„VSCodeäº¤äº’å¼æ§åˆ¶å°ï¼š</p><ol><li>æ‰“å¼€VSCodeå‘½ä»¤é¢æ¿ï¼ˆcmd+shift+pæˆ–ctrl+shift+pï¼‰ï¼Œè¿è¡Œ<code>Python: Select interpreter to start Jupyter server</code>ï¼Œé€‰æ‹©<code>/workspace/development/frappe-bench/env/bin/python</code>ã€‚</li><li>ç”±äºFrappeå¯èƒ½éœ€è¦æ—§ç‰ˆJupyterï¼Œè€ŒVSCodeæ›´æ–°è¾ƒå¿«ï¼Œå¯èƒ½å¼•å‘é—®é¢˜ï¼Œéœ€å…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/workspace/development/frappe-bench/env/bin/python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --upgrade</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jupyter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ipykernel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ipython</span></span></code></pre></div><ol start="3"><li>é€šè¿‡å‘½ä»¤é¢æ¿è¿è¡Œ<code>Python: Show Python interactive window</code>æ‰“å¼€äº¤äº’å¼çª—å£ã€‚</li><li>æ›¿æ¢<code>development.localhost</code>ä¸ºå®é™…ç«™ç‚¹åï¼Œåœ¨Jupyterå•å…ƒæ ¼ä¸­è¿è¡Œä»¥ä¸‹ä»£ç ï¼š</li></ol><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frappe</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">frappe.init(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">site</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;development.localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sites_path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/workspace/development/frappe-bench/sites&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">frappe.connect()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">frappe.local.lang </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frappe.db.get_default(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;lang&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">frappe.db.connect()</span></span></code></pre></div><p>é¦–æ¬¡æ‰§è¡Œå¯èƒ½éœ€è¦å‡ ç§’ï¼Œå±æ­£å¸¸ç°è±¡ã€‚</p><h2 id="æ‰‹åŠ¨å¯åŠ¨å®¹å™¨-évscodeç”¨æˆ·" tabindex="-1">æ‰‹åŠ¨å¯åŠ¨å®¹å™¨ï¼ˆéVSCodeç”¨æˆ·ï¼‰ <a class="header-anchor" href="#æ‰‹åŠ¨å¯åŠ¨å®¹å™¨-évscodeç”¨æˆ·" aria-label="Permalink to &quot;æ‰‹åŠ¨å¯åŠ¨å®¹å™¨ï¼ˆéVSCodeç”¨æˆ·ï¼‰&quot;">â€‹</a></h2><h3 id="è¿è¡Œå®¹å™¨" tabindex="-1">è¿è¡Œå®¹å™¨ <a class="header-anchor" href="#è¿è¡Œå®¹å™¨" aria-label="Permalink to &quot;è¿è¡Œå®¹å™¨&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .devcontainer/docker-compose.yml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><h3 id="è¿›å…¥å¼€å‘å®¹å™¨çš„äº¤äº’å¼shell" tabindex="-1">è¿›å…¥å¼€å‘å®¹å™¨çš„äº¤äº’å¼Shell <a class="header-anchor" href="#è¿›å…¥å¼€å‘å®¹å™¨çš„äº¤äº’å¼shell" aria-label="Permalink to &quot;è¿›å…¥å¼€å‘å®¹å™¨çš„äº¤äº’å¼Shell&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;TERM=xterm-256color&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /workspace/development</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> devcontainer-frappe-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span></span></code></pre></div><h2 id="å¼€å‘æ—¶ä½¿ç”¨é¢å¤–æœåŠ¡" tabindex="-1">å¼€å‘æ—¶ä½¿ç”¨é¢å¤–æœåŠ¡ <a class="header-anchor" href="#å¼€å‘æ—¶ä½¿ç”¨é¢å¤–æœåŠ¡" aria-label="Permalink to &quot;å¼€å‘æ—¶ä½¿ç”¨é¢å¤–æœåŠ¡&quot;">â€‹</a></h2><p>å¦‚éœ€åœ¨å¼€å‘ä¸­ä½¿ç”¨å…¶ä»–æœåŠ¡ï¼Œå¯åœ¨<code>.devcontainer/docker-compose.yml</code>ä¸­æ·»åŠ é…ç½®ï¼Œç„¶åé‡å»ºå¹¶åœ¨å¼€å‘å®¹å™¨ä¸­é‡æ–°æ‰“å¼€ã€‚</p><p><strong>ç¤ºä¾‹é…ç½®</strong>ï¼š</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  postgresql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">postgres:11.8</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      POSTGRES_PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">postgresql-data:/var/lib/postgresql/data</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5432:5432</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  ...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  postgresql-data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span></code></pre></div><p>åœ¨<code>frappe</code>å¼€å‘å®¹å™¨ä¸­å¯é€šè¿‡æœåŠ¡åï¼ˆå¦‚<code>postgresql</code>ï¼‰è®¿é—®è¯¥æœåŠ¡ã€‚è‹¥ç«¯å£æ˜ å°„åˆ°å®¿ä¸»ï¼Œä¹Ÿå¯é€šè¿‡<code>localhost:5432</code>è®¿é—®ã€‚</p><h2 id="ä½¿ç”¨cypressè¿›è¡Œuiæµ‹è¯•" tabindex="-1">ä½¿ç”¨Cypressè¿›è¡ŒUIæµ‹è¯• <a class="header-anchor" href="#ä½¿ç”¨cypressè¿›è¡Œuiæµ‹è¯•" aria-label="Permalink to &quot;ä½¿ç”¨Cypressè¿›è¡ŒUIæµ‹è¯•&quot;">â€‹</a></h2><p>åœ¨Dockerç¯å¢ƒä¸­è¿è¡ŒCypress UIæµ‹è¯•æ­¥éª¤ï¼š</p><ol><li>ä½¿ç”¨è„šæœ¬<code>install_x11_deps.sh</code>åœ¨VMä¸Šå®‰è£…X11å·¥å…·ï¼š</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./install_x11_deps.sh</span></span></code></pre></div><p>è¯¥è„šæœ¬ä¼šå®‰è£…ä¾èµ–ã€å¯ç”¨X11è½¬å‘ã€é‡å¯SSHæœåŠ¡å¹¶å¯¼å‡º<code>DISPLAY</code>å˜é‡ã€‚ 2. å¯åŠ¨X11æœåŠ¡ï¼ˆå¦‚<code>startx</code>æˆ–<code>xquartz</code>ï¼‰ã€‚ 3. å¯åŠ¨docker-composeæœåŠ¡ã€‚ 4. é€šè¿‡<code>docker exec..</code>å‘½ä»¤SSHè¿›å…¥ui-testeræœåŠ¡ã€‚ 5. å¯¼å‡ºCYPRESS_baseUrlç­‰æ‰€éœ€ç¯å¢ƒå˜é‡ã€‚ 6. æ‰§è¡Œ<code>cypress run</code>å‘½ä»¤å¯åŠ¨Cypress UIæ§åˆ¶å°ã€‚</p><blockquote><p>æ›´å¤šå‚è€ƒï¼š<a href="https://www.cypress.io/blog/2019/05/02/run-cypress-with-a-single-docker-command" target="_blank" rel="noreferrer">Cypresså®˜æ–¹æ–‡æ¡£</a><br> ç¡®ä¿å§‹ç»ˆå¯¼å‡º<code>DISPLAY</code>ç¯å¢ƒå˜é‡ã€‚</p></blockquote><h2 id="ä½¿ç”¨mailpitæµ‹è¯•é‚®ä»¶æœåŠ¡" tabindex="-1">ä½¿ç”¨Mailpitæµ‹è¯•é‚®ä»¶æœåŠ¡ <a class="header-anchor" href="#ä½¿ç”¨mailpitæµ‹è¯•é‚®ä»¶æœåŠ¡" aria-label="Permalink to &quot;ä½¿ç”¨Mailpitæµ‹è¯•é‚®ä»¶æœåŠ¡&quot;">â€‹</a></h2><p>å¦‚éœ€ä½¿ç”¨Mailpitï¼Œåªéœ€åœ¨docker-compose.ymlä¸­å–æ¶ˆæ³¨é‡Šç›¸å…³æœåŠ¡é…ç½®ã€‚<br> é‚®ä»¶æœåŠ¡æ¥å£å¯é€šè¿‡ç«¯å£8025è®¿é—®ï¼ŒSMTPæœåŠ¡åœ°å€ä¸º<code>mailpit:1025</code>ã€‚</p>`,79),p=[l];function n(h,o,d,r,k,c){return a(),i("div",null,p)}const y=s(t,[["render",n]]);export{F as __pageData,y as default};
